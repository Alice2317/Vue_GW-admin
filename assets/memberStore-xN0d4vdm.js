import{h as r,i}from"./index-_o1khLoC.js";import{l as a}from"./loadingStore-iEVlV0DX.js";const s=a(),u=r("memberDefineStore",{state:()=>({user:{username:"",password:""}}),actions:{isPassword(){return/^[a-zA-Z0-9!@#$%^&*]{6,16}$/.test(this.user.password)?!0:"輸入錯誤"},showPwd(){const t=document.querySelector(".eye"),e=document.querySelector(".pwd input");t.textContent==="visibility"?(t.textContent="visibility_off",e.setAttribute("type","text")):(t.textContent="visibility",e.setAttribute("type","password"))},signIn(){s.isLoading=!0,i.post("https://vue3-course-api.hexschool.io//v2/admin/signin",this.user).then(e=>{s.isLoading=!1,e.data.success?(document.cookie=`token=${e.data.token}; expires=${new Date(e.data.expired)};`,this.router.replace({name:"products"}),setTimeout(()=>{this.user={username:"",password:""}},1e3)):this.toast("error","失敗，請重新登入")}).catch(e=>{s.isLoading=!1,this.toast("error","失敗，請重新登入"),console.error("api-signIn error",e)})},logout(){s.isLoading=!0,i.post("https://vue3-course-api.hexschool.io//v2/logout").then(e=>{if(s.isLoading=!1,e.data.success){this.router.replace("/");const o=new Date;o.setMinutes(o.getMinutes()-480).toLocaleString(),document.cookie=`token=; expires=${o}`}else this.toast("error","失敗，請重新整理後再次操作")}).catch(e=>{s.isLoading=!1,this.toast("error","失敗，請重新整理後再次操作"),console.error("api-logout error",e)})}}});export{u as m};
